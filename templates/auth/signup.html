{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Account • IntelliHRTrack</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Iconify -->
  <script src="https://code.iconify.design/iconify-icon/1.0.8/iconify-icon.min.js"></script>

  <style>
    :root{
      --primary:#14b8a6;       /* teal-500 */
      --primary-dark:#0d9488;  /* teal-600 */
      --bg-left:#d9f7f2;
      --bg-right:#eefcf9;
      --card:rgba(255,255,255,.94);
      --border:rgba(15,23,42,.08);
    }
  </style>
</head>

<body class="h-full text-slate-700">

<div class="min-h-full flex items-center justify-center px-4 py-12"
     style="background:
       radial-gradient(900px 500px at 12% 0%, rgba(20,184,166,.15), transparent 60%),
       radial-gradient(700px 420px at 100% 10%, rgba(14,165,233,.10), transparent 55%),
       linear-gradient(135deg,var(--bg-left),var(--bg-right));">

  <div class="w-full max-w-md rounded-3xl shadow-xl border"
       style="background:var(--card); border-color:var(--border);">

    <div class="p-8">

      <!-- Brand -->
      <div class="flex items-center gap-4 mb-6">
        <div class="w-12 h-12 rounded-2xl bg-[var(--primary)] text-white flex items-center justify-center font-bold">
          IH
        </div>
        <div>
          <h1 class="text-xl font-semibold text-slate-900">IntelliHRTrack</h1>
          <p class="text-sm text-slate-500">Employee Registration</p>
        </div>
      </div>

      <!-- Title -->
      <div class="mb-5">
        <h2 class="text-lg font-semibold text-slate-900">Create your account</h2>
        <p class="text-sm text-slate-500">
          Your account must be approved by your branch admin.
        </p>
      </div>

      <!-- Info -->
      <div class="mb-5 px-4 py-3 rounded-xl text-sm border"
           style="background:rgba(20,184,166,.08);
                  border-color:rgba(20,184,166,.25);
                  color:var(--primary-dark);">
        <strong>Important:</strong> Choose the correct branch.  
        Only admins of that branch can approve your account.
      </div>

      <!-- Messages -->
      {% if messages %}
        <div class="space-y-2 mb-4">
          {% for m in messages %}
            <div class="px-4 py-3 rounded-xl text-sm border
              {% if m.tags == 'error' %}
                bg-red-50 text-red-700 border-red-200
              {% elif m.tags == 'success' %}
                bg-emerald-50 text-emerald-700 border-emerald-200
              {% else %}
                bg-slate-50 text-slate-700 border-slate-200
              {% endif %}
            ">
              {{ m }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Form -->
      <form method="post" class="space-y-4">
        {% csrf_token %}

        <!-- Username -->
        <div>
          <label class="block text-sm font-medium mb-1">Username</label>
          <div class="flex items-center gap-3 px-4 py-3 rounded-xl border bg-white">
            <iconify-icon icon="ph:user-duotone" class="text-teal-600 text-lg"></iconify-icon>
            <input type="text" name="username" required
                   value="{{ request.POST.username|default:'' }}"
                   class="w-full bg-transparent outline-none text-slate-900"
                   placeholder="your.username">
          </div>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-sm font-medium mb-1">Email (optional)</label>
          <div class="flex items-center gap-3 px-4 py-3 rounded-xl border bg-white">
            <iconify-icon icon="ph:envelope-duotone" class="text-teal-600 text-lg"></iconify-icon>
            <input type="email" name="email"
                   value="{{ request.POST.email|default:'' }}"
                   class="w-full bg-transparent outline-none text-slate-900"
                   placeholder="you@email.com">
          </div>
        </div>

        <!-- Branch -->
        <div>
          <label class="block text-sm font-medium mb-1">Branch</label>
          <div class="flex items-center gap-3 px-4 py-3 rounded-xl border bg-white">
            <iconify-icon icon="ph:buildings-duotone" class="text-teal-600 text-lg"></iconify-icon>
            <select name="branch" required
                    class="w-full bg-transparent outline-none text-slate-900">
              <option value="" disabled {% if not request.POST.branch %}selected{% endif %}>
                Select your branch
              </option>

              {% for b in branches %}
                <option value="{{ b.id }}"
                  {% if request.POST.branch == b.id|stringformat:"s" %}selected{% endif %}
                >
                  {{ b.name|title }}
                </option>
              {% endfor %}
            </select>
          </div>
        </div>

        <!-- Password -->
        <div>
          <label class="block text-sm font-medium mb-1">Password</label>
          <div class="flex items-center gap-3 px-4 py-3 rounded-xl border bg-white">
            <iconify-icon icon="ph:lock-key-duotone" class="text-teal-600 text-lg"></iconify-icon>
            <input type="password" name="password" required
                   class="w-full bg-transparent outline-none text-slate-900"
                   placeholder="••••••••">
          </div>
        </div>

        <!-- Confirm -->
        <div>
          <label class="block text-sm font-medium mb-1">Confirm password</label>
          <div class="flex items-center gap-3 px-4 py-3 rounded-xl border bg-white">
            <iconify-icon icon="ph:lock-duotone" class="text-teal-600 text-lg"></iconify-icon>
            <input type="password" name="password2" required
                   class="w-full bg-transparent outline-none text-slate-900"
                   placeholder="••••••••">
          </div>
        </div>

        <!-- Submit -->
        <button type="submit"
                class="w-full py-3 rounded-xl text-white font-semibold transition"
                style="background:var(--primary);"
                onmouseover="this.style.background='var(--primary-dark)'"
                onmouseout="this.style.background='var(--primary)'">
          Create Account
        </button>
      </form>

      <!-- Footer -->
      <div class="mt-6 text-sm text-center text-slate-500">
        Already approved?
        <a href="{% url 'login_ui' %}"
           class="font-medium hover:underline"
           style="color:var(--primary-dark);">
          Sign in
        </a>
      </div>

    </div>
  </div>
</div>

<p class="text-center text-xs text-slate-400 mt-6">
  © IntelliHRTrack • Secure Access
</p>

</body>
</html>
